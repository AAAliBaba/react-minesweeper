{"ast":null,"code":"var _jsxFileName = \"/Users/arafatarman/Documents/ReactProjects/minesweeper/src/index.js\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\n\nfunction Cell(props) {\n  return React.createElement(\"p\", {\n    className: \"cell\",\n    onClick: props.onClick,\n    onContextMenu: props.onClick,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 7\n    },\n    __self: this\n  }, props.face);\n}\n\nfunction init_board(arr) {\n  var count = 0;\n\n  while (count < 10) {\n    var rand_r = Math.floor(Math.random() * 9);\n    var rand_c = Math.floor(Math.random() * 9);\n\n    while (arr[rand_r][rand_c] === '*') {\n      rand_r = Math.floor(Math.random() * 9);\n      rand_c = Math.floor(Math.random() * 9);\n    }\n\n    arr[rand_r][rand_c] = '*';\n    count++;\n  }\n\n  var neighbor_rows = [-1, -1, -1, 0, 0, 1, 1, 1];\n  var neighbor_cols = [-1, 0, 1, -1, 1, -1, 0, 1];\n\n  for (var i = 0; i < 9; i++) {\n    for (var j = 0; j < 9; j++) {\n      if (arr[i][j] !== '*') {\n        var cnt_mines = 0;\n\n        for (var k = 0; k < 9; k++) {\n          var row_to_check = i + neighbor_rows[k];\n          var col_to_check = j + neighbor_cols[k];\n\n          if (row_to_check < 0 || row_to_check > 9 || col_to_check < 0 || col_to_check > 9) {\n            continue;\n          } else {\n            try {\n              if (arr[row_to_check][col_to_check] === '*') {\n                cnt_mines++;\n              }\n            } catch (error) {//some NaN/undefined error we can ignore\n            }\n          }\n        }\n\n        arr[i][j] = cnt_mines;\n      }\n    }\n  }\n\n  return arr;\n}\n\nvar bool_arr = [];\nvar val_arr = [];\nvar flag_arr = [];\nvar val_arr_isInitialized = false;\n\nfor (var i = 0; i < 9; i++) {\n  bool_arr[i] = new Array(9);\n  val_arr[i] = new Array(9);\n  flag_arr[i] = new Array(9);\n}\n\nclass Board extends React.Component {\n  constructor(props) {\n    super(props);\n    var init = [];\n\n    for (var i = 0; i < 9; i++) {\n      init[i] = new Array(9);\n    }\n\n    init_board(init);\n\n    for (var k = 0; k < 9; k++) {\n      for (var j = 0; j < 9; j++) {\n        var val = init[k][j];\n        init[k][j] = this.renderCell(k, j, val, \"\");\n      }\n    }\n\n    this.state = {\n      cells: init,\n      mines: 10,\n      revealed_cells: 0\n    };\n  }\n\n  reveal(row, col) {\n    if (flag_arr[row][col]) {\n      //do nothing\n      return;\n    } else if (val_arr[row][col] === 0 && !bool_arr[row][col]) {\n      bool_arr[row][col] = true;\n      var neighbor_rows = [-1, -1, -1, 0, 0, 1, 1, 1];\n      var neighbor_cols = [-1, 0, 1, -1, 1, -1, 0, 1];\n\n      for (var i = 0; i < 9; i++) {\n        var row_to_check = row + neighbor_rows[i];\n        var col_to_check = col + neighbor_cols[i];\n        if (row_to_check < 0 || row_to_check >= 9 || col_to_check < 0 || col_to_check >= 9) continue;\n        if (isNaN(row_to_check) || isNaN(col_to_check)) break;\n        this.reveal(row_to_check, col_to_check);\n      }\n    } else {\n      bool_arr[row][col] = true;\n    }\n\n    this.setState({\n      revealed_cells: this.state.revealed_cells + 1\n    });\n  }\n\n  flag(row, col) {\n    if (!bool_arr[row][col] || flag_arr[row][col]) {\n      // bool_arr[row][col] = true;\n      flag_arr[row][col] = !flag_arr[row][col];\n      var m = this.state.mines;\n      var r = this.state.revealed_cells;\n      flag_arr[row][col] ? this.setState({\n        mines: m - 1,\n        revealed_cells: r + 1\n      }) : this.setState({\n        mines: m + 1,\n        revealed_cells: r - 1\n      });\n    }\n  }\n\n  handleClick(row, col, event) {\n    event.preventDefault(); //need this so menu doesn't pop up when we right click\n\n    var cells_copy = [];\n\n    for (var i = 0; i < 9; i++) {\n      cells_copy[i] = new Array(9);\n    }\n\n    if (!val_arr_isInitialized) {\n      for (var j = 0; j < 9; j++) {\n        for (var k = 0; k < 9; k++) {\n          this.state.cells[j][k].props.face === \"\" ? bool_arr[j][k] = false : bool_arr[j][k] = true;\n          val_arr[j][k] = this.state.cells[j][k].props.value;\n          flag_arr[j][k] = false;\n        }\n      }\n\n      val_arr_isInitialized = true;\n    }\n\n    if (event.type === 'click') this.reveal(row, col);else {\n      this.flag(row, col);\n    }\n\n    for (var r = 0; r < 9; r++) {\n      for (var c = 0; c < 9; c++) {\n        if (bool_arr[r][c]) {\n          cells_copy[r][c] = this.renderCell(r, c, this.state.cells[r][c].props.value, this.state.cells[r][c].props.value);\n        } else if (flag_arr[r][c]) {\n          cells_copy[r][c] = this.renderCell(r, c, this.state.cells[r][c].props.value, \"M\");\n        } else {\n          cells_copy[r][c] = this.renderCell(r, c, this.state.cells[r][c].props.value, \"\");\n        }\n      }\n    }\n\n    this.setState({\n      cells: cells_copy\n    });\n  }\n\n  renderCell(r, c, v, f) {\n    return React.createElement(Cell, {\n      row: r,\n      col: c,\n      value: v,\n      face: f,\n      onClick: event => this.handleClick(r, c, event),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    });\n  }\n\n  render() {\n    if (this.state.init === null) return null;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, \"# of mines: \", this.state.mines)), React.createElement(\"div\", {\n      className: \"grid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, this.state.cells));\n  }\n\n}\n\nclass Game extends React.Component {\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, \"React.Minesweeper\"), React.createElement(Board, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }));\n  }\n\n}\n\nReactDOM.render(React.createElement(Game, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 231\n  },\n  __self: this\n}), document.getElementById('root'));","map":{"version":3,"sources":["/Users/arafatarman/Documents/ReactProjects/minesweeper/src/index.js"],"names":["React","ReactDOM","Cell","props","onClick","face","init_board","arr","count","rand_r","Math","floor","random","rand_c","neighbor_rows","neighbor_cols","i","j","cnt_mines","k","row_to_check","col_to_check","error","bool_arr","val_arr","flag_arr","val_arr_isInitialized","Array","Board","Component","constructor","init","val","renderCell","state","cells","mines","revealed_cells","reveal","row","col","isNaN","setState","flag","m","r","handleClick","event","preventDefault","cells_copy","value","type","c","v","f","render","Game","document","getElementById"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\n\nfunction Cell(props) {\n        return (\n            <p className=\"cell\" onClick={props.onClick} onContextMenu={props.onClick}>\n                {props.face}\n            </p>\n        );\n}\n\nfunction init_board(arr) {\n    var count = 0;\n    while(count < 10)\n    {\n        var rand_r = Math.floor(Math.random() * 9);\n        var rand_c = Math.floor(Math.random() * 9);\n        while(arr[rand_r][rand_c] === '*')\n        {\n            rand_r = Math.floor(Math.random() * 9);\n            rand_c = Math.floor(Math.random() * 9);\n        }\n        arr[rand_r][rand_c] = '*';\n        count++;\n    }\n\n    var neighbor_rows = [-1, -1, -1, 0, 0,   1, 1, 1];\n    var neighbor_cols = [-1,  0,  1, -1, 1, -1, 0, 1];\n\n    for(var i = 0; i < 9; i++)\n    {\n        for(var j = 0; j < 9; j++)\n        {\n            if(arr[i][j] !== '*')\n            {\n                var cnt_mines = 0;\n                for(var k = 0; k < 9; k++)\n                {\n                    var row_to_check = i + neighbor_rows[k];\n                    var col_to_check = j + neighbor_cols[k];\n                    if(row_to_check < 0 || row_to_check > 9 || col_to_check < 0 || col_to_check > 9)\n                    {\n                        continue;\n                    }\n                    else\n                    {\n                        try {\n                            if(arr[row_to_check][col_to_check] === '*')\n                                {\n                                    cnt_mines++;\n                                }\n                        } catch (error) {\n                            //some NaN/undefined error we can ignore\n                        }\n                    }\n                }\n                arr[i][j] = cnt_mines;\n            }\n        }\n    }\n    return arr;\n}\n\nvar bool_arr = [];\nvar val_arr = [];\nvar flag_arr = [];\nvar val_arr_isInitialized = false;\n\nfor(var i = 0; i < 9; i++)\n{\n    bool_arr[i] = new Array(9);\n    val_arr[i] = new Array(9);\n    flag_arr[i] = new Array(9);\n}\n\nclass Board extends React.Component {\n    constructor(props) {\n        super(props);\n\n        var init = [];\n        for(var i = 0; i < 9; i++)\n        {\n            init[i] = new Array(9);\n        }\n        init_board(init);\n\n        for(var k = 0; k < 9; k++)\n        {\n            for(var j = 0; j < 9; j++)\n            {\n                var val = init[k][j];\n                init[k][j] = this.renderCell(k, j, val, \"\");\n            }\n        }\n\n        this.state = {\n            cells: init,\n            mines: 10,\n            revealed_cells: 0,\n        }\n    }\n\n    reveal(row, col) {\n        if(flag_arr[row][col])\n        {\n            //do nothing\n            return;\n        }\n        else if(val_arr[row][col] === 0 && !bool_arr[row][col])\n        {\n            bool_arr[row][col] = true;\n\n            var neighbor_rows = [-1, -1, -1, 0,  0,  1, 1, 1];\n            var neighbor_cols = [-1,  0,  1, -1, 1, -1, 0, 1];\n\n            for(var i = 0; i < 9; i++)\n            {\n                var row_to_check = row + neighbor_rows[i];\n                var col_to_check = col + neighbor_cols[i];\n\n                if(row_to_check < 0 || row_to_check >= 9 || col_to_check < 0 || col_to_check >= 9)\n                    continue;\n\n                if(isNaN(row_to_check) || isNaN(col_to_check))\n                    break;\n\n                this.reveal(row_to_check, col_to_check);\n            }\n        }\n        else\n        {\n            bool_arr[row][col] = true;\n        }\n        this.setState({revealed_cells: this.state.revealed_cells + 1});\n    }\n\n    flag(row, col) {\n        if(!bool_arr[row][col] || flag_arr[row][col])\n        {\n            // bool_arr[row][col] = true;\n            flag_arr[row][col] = !flag_arr[row][col];\n            var m = this.state.mines;\n            var r = this.state.revealed_cells;\n            flag_arr[row][col] ? this.setState({mines: (m - 1), revealed_cells: (r + 1)}) : this.setState({mines: (m + 1), revealed_cells: (r - 1)});\n        }\n    }\n\n    handleClick(row, col, event) {\n        event.preventDefault(); //need this so menu doesn't pop up when we right click\n\n        var cells_copy = [];\n        for(var i = 0; i < 9; i++)\n        {\n            cells_copy[i] = new Array(9);\n        }\n\n        if(!val_arr_isInitialized) {\n            for(var j = 0; j < 9; j++)\n            {\n                for(var k = 0; k < 9; k++)\n                {\n                    this.state.cells[j][k].props.face === \"\" ? bool_arr[j][k] = false : bool_arr[j][k] = true;\n                    val_arr[j][k] = this.state.cells[j][k].props.value;\n                    flag_arr[j][k] = false;\n                }\n            }\n            val_arr_isInitialized = true;\n        }\n\n        if(event.type === 'click')\n            this.reveal(row, col);\n        else\n        {\n            this.flag(row, col);\n        }\n\n        for(var r = 0; r < 9; r++)\n        {\n            for(var c = 0; c < 9; c++)\n            {\n                if(bool_arr[r][c])\n                {\n                    cells_copy[r][c] = this.renderCell(r, c, (this.state.cells[r][c].props.value), (this.state.cells[r][c].props.value));\n                }\n                else if(flag_arr[r][c])\n                {\n                    cells_copy[r][c] = this.renderCell(r, c, (this.state.cells[r][c].props.value), \"M\");\n                }\n                else\n                {\n                    cells_copy[r][c] = this.renderCell(r, c, (this.state.cells[r][c].props.value), \"\");\n                }\n            }\n        }\n\n        this.setState({cells: cells_copy});\n    }\n\n    renderCell(r, c, v, f) {\n        return <Cell row={r} col={c} value={v} face={f} onClick={(event) => this.handleClick(r, c, event)}/>\n    }\n\n    render() {\n        if (this.state.init === null) return null;\n        return (\n            <div>\n                <div>\n                    <h2># of mines: {this.state.mines}</h2>\n                </div>\n                <div className=\"grid\">\n                    {this.state.cells}\n                </div>\n            </div>\n        )\n    }\n}\n\nclass Game extends React.Component {\n    render() {\n        return(\n            <div>\n                <h2>React.Minesweeper</h2>\n                <Board />\n            </div>\n        );\n    }\n}\n\nReactDOM.render(\n    <Game />,\n    document.getElementById('root')\n  );"]},"metadata":{},"sourceType":"module"}